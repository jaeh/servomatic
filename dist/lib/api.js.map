{"version":3,"sources":["../../src/lib/api.js"],"names":[],"mappings":";;;;;;IAAkB,MAAM,WAAO,SAAS,EAAhC,MAAM;;IACN,GAAG,WAAO,MAAM,EAAhB,GAAG;;AAEJ,IAAI,GAAG,GAAG,MAAM,EAAE,CAAA;;QAAd,GAAG,GAAH,GAAG;AAEd,IAAI,YAAY,GAAG,IAAI;IACnB,mBAAmB,GAAG,IAAI;IAC1B,OAAO,CACV;;AAED,SAAS,QAAQ,CAAC,GAAG,EAAE;AACrB,MAAK,YAAY,EAAG;AAClB,WAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;GAClB;CACF;;AAED,GAAG,CAAC,GAAG,CAAE,UAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAK;AAC3B,MAAI,GAAG,6BAA2B,GAAG,CAAC,WAAW,AAAE,CAAC;AACpD,UAAQ,mBAAiB,GAAG,CAAG,CAAC;;AAEhC,KAAG,CAAC,GAAG,EAAE,UAAC,MAAM,EAAK;AACnB,YAAQ,0BAAwB,MAAM,CAAC,UAAU,CAAG,CAAC;AACrD,OAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,wGAAoG,GAAG,CAAG,CAAC;GAChI,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,UAAC,CAAC,EAAK;AACpB,YAAQ,CAAC,aAAa,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;AAClC,OAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,sCAAkC,CAAC,CAAC,KAAK,yBAAoB,CAAC,CAAC,OAAO,CAAG,CAAC;GAC/F,CAAC,CAAC;CACJ,CAAC,CAAC;;qBAEY,GAAG","file":"src/lib/api.js","sourcesContent":["import {Router as router} from 'express';\nimport {get} from 'http';\n\nexport var api = router()\n\nvar debugLogging = true\n  , lastRequestFinished = true\n  , lastUrl\n;\n\nfunction debugLog(str) {\n  if ( debugLogging ) {\n    console.log(str);\n  }\n}\n\napi.use( (req, res, next) => {\n  var url = `http://127.0.0.1:8080${req.originalUrl}`;\n  debugLog(`loading url: ${url}`);\n\n  get(url, (result) => {\n    debugLog(`slackomatic get res ${result.statusCode}`);\n    res.status(200).send(`Slackomatic get request <span color=\"green\">succeeded</span>: redirected request to backend url ${url}`);\n  }).on('error', (e) => {\n    debugLog(\"Got error: \" + e.errno);\n    res.status(500).send(`Slackomatic <span color=\"red\">${e.errno} errored</span>: ${e.message}`);\n  });\n});\n\nexport default api;\n"]}